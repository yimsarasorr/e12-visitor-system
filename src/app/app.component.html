<div class="vms-layout">
  <header class="vms-header">
    <div class="header-brand">
      <img src="assets/Fastpass-Icon_1.png" alt="Fastpass" class="brand-logo" />
      <div class="brand-copy">
        <span class="brand-title">Fastpass</span>
        <span class="brand-subtitle">ระบบเข้าอาคาร</span>
      </div>
    </div>
    <div class="header-actions">
      <button pButton pRipple type="button" class="p-button-rounded p-button-text header-action">
        <i class="pi pi-bell"></i>
      </button>
      <div class="header-user-chip">
        <i class="pi pi-user"></i>
        <span>Guest</span>
      </div>
    </div>
  </header>

  <main class="vms-content" [class.floor-active]="!!selectedFloor">
    <section class="search-section">
      <div class="floating-search-bar">
        <div class="search-shell">
          <i class="pi pi-search"></i>
          <input
            pInputText
            type="text"
            [placeholder]="!selectedFloor ? 'ค้นหาอาคารหรือพื้นที่...' : 'ค้นหาในชั้น ' + selectedFloor.floor + '...'"
            aria-label="ค้นหาอาคารหรือสถานที่"
          />
        </div>
      </div>
    </section>

    <section class="overview" *ngIf="!selectedFloor">
      <div class="overview__copy">
        <span class="badge">3D FloorPlan</span>
        <h1>สำรวจอาคารเรียนรวมวิศวกรรมศาสตร์</h1>
        <p>หมุนดูอาคารแบบสามมิติก่อนเลือกชั้นที่ต้องการเข้าใช้งาน</p>
      </div>
      <div class="overview__canvas">
        <app-building-view
          [floors]="buildingData.floors"
          [activeFloor]="lastActiveFloor"
          (floorSelected)="onFloorSelected($event)">
        </app-building-view>
      </div>
    </section>

    <section class="floor-explorer" *ngIf="selectedFloor">
      <header class="floor-explorer__toolbar">
        <button type="button" class="toolbar-back" (click)="resetToBuildingOverview()">
          <i class="pi pi-arrow-left"></i>
          <span>กลับหน้าอาคาร</span>
        </button>
        <div class="floor-explorer__meta">
          <span class="badge">3D FloorPlan</span>
          <h2>{{ selectedFloor?.floorName || ('ชั้น ' + selectedFloor?.floor) }}</h2>
        </div>
        <div class="floor-explorer__selector" *ngIf="buildingData.floors?.length">
          <span class="selector-label">เลือกชั้น</span>
          <div class="selector-track" role="list">
            <button
              type="button"
              class="selector-chip"
              *ngFor="let floor of buildingData.floors"
              [class.active]="floor.floor === selectedFloor?.floor"
              (click)="onFloorSelected(floor.floor)"
            >
              {{ floor.floor }}
            </button>
          </div>
        </div>
      </header>
      <div class="floor-explorer__canvas">
        <app-floor-plan [floorData]="selectedFloor"></app-floor-plan>
      </div>
    </section>
  </main>

  <footer class="vms-footer">
    <button pButton pRipple type="button" class="p-button-text footer-button active">
      <i class="pi pi-compass"></i>
      <span>สำรวจ</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-calendar"></i>
      <span>การจอง</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-bookmark"></i>
      <span>บันทึกแล้ว</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-clock"></i>
      <span>ล่าสุด</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-user"></i>
      <span>โปรไฟล์</span>
    </button>
  </footer>
</div>
