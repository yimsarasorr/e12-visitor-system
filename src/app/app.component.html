<div class="vms-layout">
  <header class="vms-header">
    <div class="header-brand">
      <img src="assets/fastpass-icon.svg" alt="Fastpass" class="brand-logo" />
      <div class="brand-copy">
        <span class="brand-title">Fastpass</span>
        <span class="brand-subtitle">ระบบเข้าอาคาร</span>
      </div>
    </div>
    <div class="header-actions">
      <button pButton pRipple type="button" class="p-button-rounded p-button-text header-action">
        <i class="pi pi-bell"></i>
      </button>
      <div class="header-user-chip">
        <i class="pi pi-user"></i>
        <span>Guest</span>
      </div>
    </div>
  </header>

  <main class="vms-content" [class.floor-active]="!!selectedFloor">
    <section class="search-section">
      <div class="floating-search-bar">
        <div class="search-shell">
          <i class="pi pi-search"></i>
          <input
            pInputText
            type="text"
            [placeholder]="!selectedFloor ? 'ค้นหาอาคารหรือพื้นที่...' : 'ค้นหาในชั้น ' + selectedFloor.floor + '...'"
            aria-label="ค้นหาอาคารหรือสถานที่"
          />
        </div>
      </div>
    </section>

    <section class="overview" *ngIf="!selectedFloor">
      <div class="overview__canvas">
        <app-building-view
          [floors]="buildingData.floors"
          [activeFloor]="lastActiveFloor"
          (floorSelected)="onFloorSelected($event)">
        </app-building-view>
      </div>
      <div class="overview__copy">
        <h1>สำรวจอาคารเรียนรวมวิศวกรรมศาสตร์</h1>
        <p>
          หมุนดูแปลนอาคารก่อนเลือกชั้นที่ต้องการเข้าใช้งาน และบันทึกรายละเอียดไว้สำหรับการจำลอง
          การเข้าออกในระบบ Fastpass
        </p>
      </div>
    </section>

    <section class="floor-explorer" *ngIf="selectedFloor">
      <div class="floor-explorer__back-row">
        <button type="button" class="toolbar-back" (click)="resetToBuildingOverview()">
          <i class="pi pi-arrow-left"></i>
          <span>กลับไปเลือกอาคาร</span>
        </button>
      </div>
      <div class="floor-explorer__content">
        <aside class="floor-explorer__details">
          <h2>{{ selectedFloor?.floorName || ('ชั้น ' + selectedFloor?.floor) }}</h2>
          <p class="floor-explorer__lead">
            เลือกชั้นอื่นเพื่อสลับการจำลอง และใช้จอยสติ๊กเพื่อหมุนดูตำแหน่งต่างๆ ของพื้นที่ภายในอาคาร
          </p>
          <label class="floor-explorer__selector" *ngIf="buildingData.floors?.length">
            <span class="selector-label">เลือกชั้น</span>
            <select
              class="floor-dropdown"
              [value]="selectedFloor?.floor ?? ''"
              (change)="onFloorDropdownChange($any($event.target).value)"
              aria-label="เลือกชั้น"
            >
              <option *ngFor="let option of floorOptions" [value]="option.value">
                {{ option.label }}
              </option>
            </select>
          </label>
        </aside>
        <div class="floor-explorer__canvas">
          <app-floor-plan [floorData]="selectedFloor"></app-floor-plan>
        </div>
      </div>
    </section>
  </main>

  <footer class="vms-footer">
    <button pButton pRipple type="button" class="p-button-text footer-button active">
      <i class="pi pi-compass"></i>
      <span>สำรวจ</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-calendar"></i>
      <span>การจอง</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-bookmark"></i>
      <span>บันทึกแล้ว</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-clock"></i>
      <span>ล่าสุด</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-user"></i>
      <span>โปรไฟล์</span>
    </button>
  </footer>
</div>
