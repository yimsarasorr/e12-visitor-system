<div class="vms-layout">
  <header class="vms-header">
    <div class="header-brand">
      <img src="assets/fastpass-icon.svg" alt="Fastpass" class="brand-logo" />
      <div class="brand-copy">
        <span class="brand-title">Fastpass</span>
        <span class="brand-subtitle">ระบบเข้าอาคาร</span>
      </div>
    </div>
    <div class="header-actions">
      <button pButton pRipple type="button" class="p-button-rounded p-button-text header-action">
        <i class="pi pi-bell"></i>
      </button>
      <div class="header-user-chip">
        <i class="pi pi-user"></i>
        <span>Guest</span>
      </div>
    </div>
  </header>

  <main class="vms-content" [class.floor-active]="!!selectedFloor">
    <div class="floating-search-bar">
      <div class="search-shell">
        <i class="pi pi-search"></i>
        <input
          pInputText
          type="text"
          [placeholder]="!selectedFloor ? 'ค้นหาอาคารหรือพื้นที่...' : 'ค้นหาในชั้น ' + selectedFloor.floor + '...'"
          aria-label="ค้นหาอาคารหรือสถานที่"
        />
      </div>
    </div>

    <ng-container *ngIf="!selectedFloor; else floorWorkspace">
      <div class="workspace-overview">
        <section class="overview-visual">
          <div class="visual-card">
            <div class="visual-card__header">
              <span class="badge">3D FloorPlan</span>
              <div>
                <h2>สำรวจอาคารเรียนรวมวิศวกรรมศาสตร์</h2>
                <p>ดูภาพรวมของอาคารและเลือกชั้นที่ต้องการเจาะลึก</p>
              </div>
            </div>
            <div class="visual-card__canvas">
              <app-building-view
                [floors]="buildingData.floors"
                [activeFloor]="lastActiveFloor"
                (floorSelected)="onFloorSelected($event)">
              </app-building-view>
            </div>
          </div>
        </section>
      </div>
    </ng-container>

    <ng-template #floorWorkspace>
      <div class="floor-stage">
        <div class="floor-stage__overlay">
          <button type="button" class="stage-back" (click)="resetToBuildingOverview()">
            <i class="pi pi-arrow-left"></i>
            <span>กลับหน้าเลือกอาคาร</span>
          </button>
          <div class="floor-stage__info">
            <span class="badge">3D FloorPlan</span>
            <h2>{{ selectedFloor?.floorName || ('ชั้น ' + selectedFloor?.floor) }}</h2>
          </div>
          <div class="floor-stage__floors" role="list">
            <button
              type="button"
              class="floor-chip"
              *ngFor="let floor of buildingData.floors"
              [class.active]="floor.floor === selectedFloor?.floor"
              (click)="onFloorSelected(floor.floor)"
            >
              {{ floor.floor }}
            </button>
          </div>
        </div>
        <app-floor-plan [floorData]="selectedFloor"></app-floor-plan>
      </div>
    </ng-template>
  </main>

  <footer class="vms-footer">
    <button pButton pRipple type="button" class="p-button-text footer-button active">
      <i class="pi pi-compass"></i>
      <span>สำรวจ</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-calendar"></i>
      <span>การจอง</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-bookmark"></i>
      <span>บันทึกแล้ว</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-clock"></i>
      <span>ล่าสุด</span>
    </button>
    <button pButton pRipple type="button" class="p-button-text footer-button">
      <i class="pi pi-user"></i>
      <span>โปรไฟล์</span>
    </button>
  </footer>
</div>
